<!doctype html>
<html lang="ja">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
    <title>4択クイズ</title>
    <link rel="stylesheet" href="./style.css" />
  </head>
  <body>
    <main id="app">
      <div id="app-version" title="バージョン">v<span id="version">0.01</span></div>
      <section id="screen-menu" class="screen active">
        <h1>4択クイズ</h1>
        <div class="stats">
          <div><span>累積スコア</span><strong id="stat-total">0 / 0</strong></div>
          <div><span>挑戦回数</span><strong id="stat-attempts">0</strong></div>
        </div>

        <button id="btn-start" class="primary">クイズ開始</button>

        <div class="section">
          <h2>問題セット</h2>
          <p class="hint">JSON または YAML を読み込めます。未選択時は内蔵サンプルを使用。</p>
          <label class="file">
            <input type="file" id="file-input" accept=".json,.yml,.yaml" />
            <span>問題セットを読み込む</span>
          </label>
          <div id="set-name" class="muted"></div>
        </div>

        <button id="btn-history" class="secondary">スコア履歴を見る</button>
        <button id="btn-stats" class="secondary">ID別統計を見る</button>
      </section>

      <section id="screen-quiz" class="screen">
        <div class="topbar">
          <button id="btn-exit" class="link">← メニュー</button>
          <div id="quiz-progress">1 / 5</div>
        </div>
        <div class="card">
          <div id="quiz-category" class="chip"></div>
          <h2 id="quiz-question">問題</h2>
          <div id="choices" class="choices"></div>
          <div id="feedback" class="feedback"></div>
        </div>
        <button id="btn-next" class="primary" disabled>次へ</button>
      </section>

      <section id="screen-result" class="screen">
        <h2>ラウンド結果</h2>
        <div class="score-big" id="round-score">0 / 5</div>
        <ul id="round-review" class="history"></ul>
        <div class="actions">
          <button id="btn-again" class="primary">もう一度</button>
          <button id="btn-menu" class="secondary">メニューへ</button>
        </div>
      </section>

      <section id="screen-history" class="screen">
        <div class="topbar">
          <button id="btn-history-back" class="link">← メニュー</button>
          <div>スコア履歴</div>
        </div>
        <ul id="history-list" class="history"></ul>
      </section>

      <section id="screen-stats" class="screen">
        <div class="topbar">
          <button id="btn-stats-back" class="link">← メニュー</button>
          <div>ID別統計</div>
        </div>
        <div class="section">
          <label for="stats-sort" class="hint">並び替え</label>
          <select id="stats-sort">
            <option value="id">ID順</option>
            <option value="wrong">誤答が多い順</option>
            <option value="acc">正解率が低い順</option>
            <option value="recent">最近プレイ順</option>
          </select>
        </div>
        <ul id="stats-list" class="history"></ul>
      </section>
    </main>

    <script src="./app.js"></script>
  </body>
  </html>
